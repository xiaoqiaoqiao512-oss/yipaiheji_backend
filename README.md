[README.md](https://github.com/user-attachments/files/25161228/README.md)
# ä¸€æ‹å’Œé›† (YiPaiHeJi) åç«¯ API

ä¸€ä¸ªåŸºäº Django å’Œ Django REST Framework çš„å¤§å­¦ç”Ÿæ‘„å½±äº¤æ˜“å¹³å°çš„åç«¯æœåŠ¡ã€‚ç”¨æˆ·å¯ä»¥å‘å¸ƒæ‘„å½±éœ€æ±‚ï¼Œåˆ›ä½œè€…å¯ä»¥æä¾›æ‘„å½±æœåŠ¡ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªå®Œæ•´çš„ REST API åç«¯ï¼Œæ”¯æŒä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š
- ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€è®¤è¯ï¼ˆJWTï¼‰
- ç”¨æˆ·èº«ä»½ç®¡ç†ï¼ˆæ™®é€šå­¦ç”Ÿ/åˆ›ä½œè€…/ç®¡ç†å‘˜ï¼‰
- åˆ›ä½œè€…æ¡£æ¡ˆä¸ä½œå“é›†ç®¡ç†
- ç”¨æˆ·éœ€æ±‚å‘å¸ƒä¸ç®¡ç†
- å®æ—¶æ¶ˆæ¯èŠå¤©ç³»ç»Ÿ

---

## ğŸ—ï¸ é¡¹ç›®ç»“æ„æ¸…å•

```
yipaiheji_backend/
â”œâ”€â”€ manage.py                    # Djangoé¡¹ç›®ç®¡ç†å‘½ä»¤è¡Œå·¥å…·
â”œâ”€â”€ db.sqlite3                   # SQLiteæ•°æ®åº“æ–‡ä»¶ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
â”œâ”€â”€ yipaiheji/                   # Djangoé¡¹ç›®é…ç½®æ¨¡å—
â”‚   â”œâ”€â”€ settings.py              # é¡¹ç›®é…ç½®æ–‡ä»¶ï¼ˆæ•°æ®åº“ã€åº”ç”¨ã€ä¸­é—´ä»¶ç­‰ï¼‰
â”‚   â”œâ”€â”€ urls.py                  # é¡¹ç›®URLè·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ asgi.py                  # ASGIåº”ç”¨å…¥å£ï¼ˆå¼‚æ­¥ï¼‰
â”‚   â””â”€â”€ wsgi.py                  # WSGIåº”ç”¨å…¥å£ï¼ˆç”Ÿäº§éƒ¨ç½²ï¼‰
â”‚
â”œâ”€â”€ users/                       # ç”¨æˆ·æ¨¡å—
â”‚   â”œâ”€â”€ models.py                # è‡ªå®šä¹‰Useræ¨¡å‹ï¼ˆæ‰©å±•äº†Djangoå†…ç½®ç”¨æˆ·ï¼‰
â”‚   â”‚   â””â”€â”€ User: ç”¨æˆ·åŸºç¡€æ¨¡å‹ï¼ŒåŒ…å«è§’è‰²ã€è®¤è¯çŠ¶æ€ã€ç»Ÿè®¡ä¿¡æ¯
â”‚   â”œâ”€â”€ views.py                 # APIè§†å›¾
â”‚   â”‚   â”œâ”€â”€ RegisterView: ç”¨æˆ·æ³¨å†ŒAPIï¼ˆå…è®¸ä»»ä½•äººè®¿é—®ï¼‰
â”‚   â”‚   â”œâ”€â”€ LoginView: ç”¨æˆ·ç™»å½•APIï¼ˆè¿”å›JWT tokenï¼‰
â”‚   â”‚   â””â”€â”€ UserProfileView: è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯
â”‚   â”œâ”€â”€ serializers.py           # åºåˆ—åŒ–å™¨ï¼ˆæ•°æ®éªŒè¯å’Œè½¬æ¢ï¼‰
â”‚   â”œâ”€â”€ urls.py                  # ç”¨æˆ·æ¨¡å—URLè·¯ç”±
â”‚   â”œâ”€â”€ admin.py                 # Django adminé…ç½®
â”‚   â”œâ”€â”€ signals.py               # Djangoä¿¡å·ï¼ˆé’©å­å‡½æ•°ï¼‰
â”‚   â”œâ”€â”€ tests.py                 # å•å…ƒæµ‹è¯•
â”‚   â””â”€â”€ migrations/              # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚
â”œâ”€â”€ creators/                    # åˆ›ä½œè€…æ¨¡å—
â”‚   â”œâ”€â”€ models.py                # åˆ›ä½œè€…ç›¸å…³æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ CreatorProfile: åˆ›ä½œè€…æ¡£æ¡ˆï¼ˆä¸€å¯¹ä¸€å…³è”åˆ°Userï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ åŒ…å«æœåŠ¡ä»‹ç»ã€ä»·æ ¼ã€å¤§æ»¡è§†ç­‰ä¿¡æ¯
â”‚   â”‚   â”œâ”€â”€ Work: åˆ›ä½œè€…ä½œå“é›†
â”‚   â”‚   â”‚   â””â”€â”€ åŒ…å«ä½œå“å›¾ç‰‡ã€æè¿°ã€æ ‡ç­¾ã€äº’åŠ¨æ•°æ®
â”‚   â”‚   â””â”€â”€ Service: åˆ›ä½œè€…æä¾›çš„æœåŠ¡
â”‚   â”‚       â””â”€â”€ åŒ…å«æœåŠ¡ç±»å‹ã€ä»·æ ¼ã€è¯¦æƒ…ç­‰
â”‚   â”œâ”€â”€ views.py                 # APIè§†å›¾
â”‚   â”‚   â”œâ”€â”€ CreatorProfileView: åˆ›ä½œè€…æ¡£æ¡ˆç®¡ç†ï¼ˆéœ€è®¤è¯ä¸ºåˆ›ä½œè€…ï¼‰
â”‚   â”‚   â”œâ”€â”€ CreatorPublicView: å…¬å¼€åˆ›ä½œè€…ä¿¡æ¯ï¼ˆä»»ä½•äººå¯è®¿é—®ï¼‰
â”‚   â”‚   â”œâ”€â”€ WorkListCreateView: åˆ›ä½œè€…ä½œå“åˆ—è¡¨å’Œä¸Šä¼ 
â”‚   â”‚   â””â”€â”€ IsCreatoræƒé™ç±»: é™åˆ¶åªæœ‰å·²è®¤è¯åˆ›ä½œè€…å¯è®¿é—®
â”‚   â”œâ”€â”€ serializers.py           # åºåˆ—åŒ–å™¨
â”‚   â”œâ”€â”€ urls.py                  # åˆ›ä½œè€…æ¨¡å—URLè·¯ç”±
â”‚   â”œâ”€â”€ admin.py                 # Django adminé…ç½®
â”‚   â”œâ”€â”€ tests.py                 # å•å…ƒæµ‹è¯•
â”‚   â””â”€â”€ migrations/              # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚
â”œâ”€â”€ demands/                     # éœ€æ±‚æ¨¡å—
â”‚   â”œâ”€â”€ models.py                # éœ€æ±‚ç›¸å…³æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Demand: ç”¨æˆ·å‘å¸ƒçš„éœ€æ±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ éœ€æ±‚ç±»å‹ï¼šçº¦æ‹/å¦†é€ /ä¿®å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ çŠ¶æ€ï¼šå¾…æ¥å•/å·²æ¥å•/è¿›è¡Œä¸­/å·²å®Œæˆ/å·²å–æ¶ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ åŒ…å«æ—¶é—´ã€åœ°ç‚¹ã€é¢„ç®—ã€äººæ•°ç­‰ä¿¡æ¯
â”‚   â”‚   â”‚   â””â”€â”€ å¯ä¸åˆ›ä½œè€…åŒ¹é…
â”‚   â”‚   â””â”€â”€ DemandComment: éœ€æ±‚è¯„è®ºï¼ˆåˆ›ä½œè€…æŠ¥ä»·ï¼‰
â”‚   â”‚       â””â”€â”€ ç”¨äºåˆ›ä½œè€…å¯¹éœ€æ±‚è¿›è¡ŒæŠ¥ä»·å’Œæ²Ÿé€š
â”‚   â”œâ”€â”€ views.py                 # APIè§†å›¾
â”‚   â”‚   â”œâ”€â”€ DemandListCreateView: éœ€æ±‚åˆ—è¡¨å’Œåˆ›å»º
â”‚   â”‚   â”‚   â””â”€â”€ æ”¯æŒæŒ‰ç±»å‹ã€åœ°ç‚¹ã€çŠ¶æ€ã€é¢„ç®—è¿‡æ»¤
â”‚   â”‚   â”œâ”€â”€ DemandDetailView: éœ€æ±‚è¯¦æƒ…ã€ç¼–è¾‘ã€åˆ é™¤
â”‚   â”‚   â”‚   â””â”€â”€ åªæœ‰å‘å¸ƒè€…å¯ä»¥ä¿®æ”¹/åˆ é™¤
â”‚   â”‚   â””â”€â”€ DemandCommentCreateView: éœ€æ±‚æŠ¥ä»·å‘å¸ƒ
â”‚   â”œâ”€â”€ serializers.py           # åºåˆ—åŒ–å™¨
â”‚   â”œâ”€â”€ urls.py                  # éœ€æ±‚æ¨¡å—URLè·¯ç”±
â”‚   â”œâ”€â”€ admin.py                 # Django adminé…ç½®
â”‚   â”œâ”€â”€ tests.py                 # å•å…ƒæµ‹è¯•
â”‚   â””â”€â”€ migrations/              # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚
â”œâ”€â”€ chat/                        # èŠå¤©æ¨¡å—ï¼ˆå¼€å‘ä¸­ï¼‰
â”‚   â”œâ”€â”€ models.py                # èŠå¤©æ•°æ®æ¨¡å‹ï¼ˆå¾…å®ç°ï¼‰
â”‚   â”œâ”€â”€ views.py                 # èŠå¤©APIè§†å›¾ï¼ˆå¾…å®ç°ï¼‰
â”‚   â”œâ”€â”€ serializers.py           # èŠå¤©åºåˆ—åŒ–å™¨ï¼ˆå¾…å®ç°ï¼‰
â”‚   â”œâ”€â”€ urls.py                  # èŠå¤©æ¨¡å—URLè·¯ç”±
â”‚   â”œâ”€â”€ admin.py                 # Django adminé…ç½®
â”‚   â”œâ”€â”€ tests.py                 # å•å…ƒæµ‹è¯•
â”‚   â””â”€â”€ migrations/              # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚
â””â”€â”€ media/                       # åª’ä½“æ–‡ä»¶å­˜å‚¨ç›®å½•ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
    â”œâ”€â”€ avatars/                 # ç”¨æˆ·å¤´åƒ
    â”œâ”€â”€ student_cards/           # å­¦ç”Ÿè¯ç…§ç‰‡
    â””â”€â”€ works/                   # åˆ›ä½œè€…ä½œå“å›¾ç‰‡
```

---

## ğŸ“„ å…³é”®æ–‡ä»¶è¯¦è§£

### 1. **yipaiheji/settings.py** - é¡¹ç›®é…ç½®æ–‡ä»¶

**ä¸»è¦é…ç½®é¡¹ï¼š**
- `SECRET_KEY`: Djangoå¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒéœ€ä¿®æ”¹ï¼‰
- `DEBUG`: è°ƒè¯•æ¨¡å¼å¼€å…³ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»æ”¹ä¸ºFalseï¼‰
- `ALLOWED_HOSTS`: å…è®¸çš„ä¸»æœºåˆ—è¡¨ï¼ˆç”Ÿäº§ç¯å¢ƒéœ€é…ç½®ï¼‰
- `INSTALLED_APPS`: æ³¨å†Œçš„åº”ç”¨åˆ—è¡¨
  - Djangoå†…ç½®åº”ç”¨ï¼šadminã€authã€contenttypesç­‰
  - è‡ªå®šä¹‰åº”ç”¨ï¼šusersã€creatorsã€demandsã€chat
  - ç¬¬ä¸‰æ–¹åº”ç”¨ï¼šrest_frameworkã€rest_framework_simplejwtï¼ˆJWTè®¤è¯ï¼‰
- `DATABASES`: æ•°æ®åº“é…ç½®ï¼ˆé»˜è®¤SQLiteï¼Œç”Ÿäº§æ¨èPostgreSQLï¼‰
- `REST_FRAMEWORK`: DRFé…ç½®
  - é»˜è®¤è®¤è¯æ–¹å¼ä¸ºJWT
  - é»˜è®¤æƒé™ä¸ºIsAuthenticatedï¼ˆéœ€è¦è®¤è¯ï¼‰
- `SIMPLE_JWT`: JWTä»¤ç‰Œé…ç½®
  - ACCESS_TOKEN_LIFETIME: è®¿é—®ä»¤ç‰Œ7å¤©æœ‰æ•ˆæœŸ
  - REFRESH_TOKEN_LIFETIME: åˆ·æ–°ä»¤ç‰Œ30å¤©æœ‰æ•ˆæœŸ
- `MEDIA_URL` å’Œ `MEDIA_ROOT`: åª’ä½“æ–‡ä»¶é…ç½®

### 2. **yipaiheji/urls.py** - é¡¹ç›®URLè·¯ç”±é…ç½®

**URLæ˜ å°„å…³ç³»ï¼š**
```
/admin/                          â†’ Django Adminåå°
/api/users/                      â†’ ç”¨æˆ·APIï¼ˆæ³¨å†Œã€ç™»å½•ã€ä¸ªäººä¿¡æ¯ï¼‰
/api/creators/                   â†’ åˆ›ä½œè€…APIï¼ˆæ¡£æ¡ˆã€ä½œå“ã€æœåŠ¡ï¼‰
/api/demands/                    â†’ éœ€æ±‚APIï¼ˆå‘å¸ƒã€æœç´¢ã€æŠ¥ä»·ï¼‰
/api/token/refresh/              â†’ JWTä»¤ç‰Œåˆ·æ–°æ¥å£
/media/                          â†’ åª’ä½“æ–‡ä»¶è®¿é—®ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
```

### 3. **users/models.py** - ç”¨æˆ·æ¨¡å‹

**User æ¨¡å‹å­—æ®µï¼š**
- **åŸºç¡€ä¿¡æ¯**
  - `username`: ç”¨æˆ·åï¼ˆç»§æ‰¿è‡ªAbstractUserï¼‰
  - `email`: é‚®ç®±ï¼ˆç»§æ‰¿è‡ªAbstractUserï¼‰
  - `first_name`, `last_name`: åå’Œå§“
  - `student_id`: å­¦å·ï¼ˆä¾¿äºæ ¡å›­è®¤è¯ï¼‰
  - `phone`: æ‰‹æœºå·
  - `avatar`: ç”¨æˆ·å¤´åƒå›¾ç‰‡

- **è§’è‰²å’Œè®¤è¯**
  - `role`: ç”¨æˆ·è§’è‰²ï¼ˆstudent/creator/adminï¼‰
  - `is_verified`: æ˜¯å¦é€šè¿‡æ ¡å›­è®¤è¯
  - `student_card_img`: å­¦ç”Ÿè¯ç…§ç‰‡ï¼ˆç”¨äºè®¤è¯ï¼‰
  - `creator_application_status`: åˆ›ä½œè€…ç”³è¯·çŠ¶æ€ï¼ˆnot_applied/pending/approved/rejectedï¼‰
  - `creator_applied_at`: åˆ›ä½œè€…ç”³è¯·æ—¶é—´

- **ä¸ªäººç®€ä»‹**
  - `bio`: ä¸ªäººç®€ä»‹æ–‡æœ¬
  - `tags`: æ ‡ç­¾åˆ—è¡¨ï¼ˆJSONæ ¼å¼ï¼Œå¦‚["äººåƒ","å¤œæ™¯"]ï¼‰

- **ç»Ÿè®¡**
  - `completed_orders`: å®Œæˆè®¢å•æ•°
  - `is_active_creator`: æ˜¯å¦æ´»è·ƒåˆ›ä½œè€…

- **æ—¶é—´æˆ³**
  - `created_at`: åˆ›å»ºæ—¶é—´
  - `updated_at`: æ›´æ–°æ—¶é—´

**å†…ç½®æ–¹æ³•ï¼š**
- `is_creator` å±æ€§: åˆ¤æ–­æ˜¯å¦ä¸ºå·²è®¤è¯åˆ›ä½œè€…
- `display_role` å±æ€§: è¿”å›æ˜¾ç¤ºçš„è§’è‰²åç§°

### 4. **creators/models.py** - åˆ›ä½œè€…ç›¸å…³æ¨¡å‹

**CreatorProfile æ¨¡å‹ï¼ˆåˆ›ä½œè€…æ¡£æ¡ˆï¼‰ï¼š**
- ä¸Userä¸€å¯¹ä¸€å…³è”ï¼ˆåˆ é™¤ç”¨æˆ·æ—¶æ¡£æ¡ˆä¹Ÿåˆ é™¤ï¼‰
- **æœåŠ¡ä¿¡æ¯**: æœåŠ¡ä»‹ç»ã€åŸºç¡€ä»·æ ¼ã€ä»·æ ¼åŒºé—´ã€æ˜¯å¦è®®ä»·
- **è®¾å¤‡ä¿¡æ¯**: ç›¸æœºå‹å·ã€åŒ–å¦†/æœè£…æä¾›èƒ½åŠ›
- **ç»Ÿè®¡ä¿¡æ¯**: å®Œæˆè®¢å•æ•°ã€å¹³å‡è¯„åˆ†ã€è¢«æŸ¥çœ‹æ¬¡æ•°

**Work æ¨¡å‹ï¼ˆåˆ›ä½œè€…ä½œå“ï¼‰ï¼š**
- ä¸Userå¤šå¯¹ä¸€å…³è”ï¼ˆä¸€ä¸ªåˆ›ä½œè€…å¤šä¸ªä½œå“ï¼‰
- **ä½œå“å†…å®¹**: æ ‡é¢˜ã€å›¾ç‰‡ã€æè¿°
- **ä½œå“ä¿¡æ¯**: æ ‡ç­¾ã€æ‹æ‘„æ—¶é—´ã€æ‹æ‘„åœ°ç‚¹
- **äº’åŠ¨æ•°æ®**: ç‚¹èµæ•°ã€æµè§ˆæ•°ã€å…¬å¼€çŠ¶æ€
- æœ€å¤šå¯ä¸Šä¼ 20ä¸ªä½œå“

**Service æ¨¡å‹ï¼ˆåˆ›ä½œè€…æœåŠ¡ï¼‰ï¼š**
- åˆ›ä½œè€…æä¾›çš„å…·ä½“æœåŠ¡ï¼ˆå¦‚çº¦æ‹ã€ä¿®å›¾ç­‰ï¼‰
- åŒ…å«æœåŠ¡åç§°ã€ä»·æ ¼ã€è¯¦ç»†æè¿°

### 5. **demands/models.py** - éœ€æ±‚æ¨¡å‹

**Demand æ¨¡å‹ï¼ˆç”¨æˆ·å‘å¸ƒçš„éœ€æ±‚ï¼‰ï¼š**
- **åŸºç¡€ä¿¡æ¯**: æ ‡é¢˜ã€ç±»å‹ã€è¯¦ç»†æè¿°
- **éœ€æ±‚ç±»å‹**: çº¦æ‹(photo)/å¦†é€ (makeup)/ä¿®å›¾(retouch)
- **æ—¶é—´åœ°ç‚¹**: æ‹æ‘„æ—¶é—´ã€æ‹æ‘„åœ°ç‚¹ã€æ ¡å†…åœ°ç‚¹
- **é¢„ç®—**: é¢„ç®—é‡‘é¢ã€æœ€ä½é¢„ç®—ã€æœ€é«˜é¢„ç®—ã€äººæ•°
- **çŠ¶æ€ç®¡ç†**: pending(å¾…)/matched(å·²æ¥)/in_progress(è¿›ä¸­)/completed(å·²å®Œ)/cancelled(å·²å–)
- **æ ‡ç­¾å’Œä¸“é¢˜**: æ ‡ç­¾åˆ—è¡¨ã€ç‰¹è‰²ä¸“é¢˜ï¼ˆå¦‚"æ¨±èŠ±å­£"ï¼‰
- **å‚è€ƒå›¾**: å‚è€ƒå›¾ç‰‡åˆ—è¡¨ï¼ˆJSONæ ¼å¼ï¼‰
- **åŒ¹é…ä¿¡æ¯**: å¯ä¸åˆ›ä½œè€…åŒ¹é…ï¼Œè®°å½•åŒ¹é…çš„åˆ›ä½œè€…
- **ç»Ÿè®¡**: æµè§ˆæ•°ã€è¯„è®ºæ•°

**DemandComment æ¨¡å‹ï¼ˆéœ€æ±‚è¯„è®º/æŠ¥ä»·ï¼‰ï¼š**
- åˆ›ä½œè€…å¯¹éœ€æ±‚çš„æŠ¥ä»·å’Œè¯„è®º
- ç”¨äºéœ€æ±‚å‘å¸ƒè€…å’Œåˆ›ä½œè€…æ²Ÿé€š

### 6. **chat/models.py** - èŠå¤©æ¨¡å—ï¼ˆå¾…å®ç°ï¼‰

ç›®å‰ä¸ºç©ºï¼Œè®¡åˆ’æ”¯æŒï¼š
- å®æ—¶æ¶ˆæ¯åŠŸèƒ½
- ç”¨æˆ·ä¹‹é—´çš„ç§ä¿¡
- å¯èƒ½éœ€è¦WebSocketæ”¯æŒ

---

## ğŸ”§ å¿…è¦çš„é…ç½®æ–‡ä»¶å’Œç¯å¢ƒå˜é‡

### 1. **requirements.txt** - é¡¹ç›®ä¾èµ–

å»ºè®®åŒ…å«ä»¥ä¸‹æ ¸å¿ƒåŒ…ï¼š
```
Django>=6.0
djangorestframework
djangorestframework-simplejwt
django-cors-headers
python-decouple  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
Pillow           # å›¾ç‰‡å¤„ç†
psycopg2-binary  # PostgreSQLé©±åŠ¨ï¼ˆå¯é€‰ï¼‰
```

### 2. **.env** - ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼ˆç¤ºä¾‹ï¼‰

ç”Ÿäº§ç¯å¢ƒåº”åˆ›å»ºæ­¤æ–‡ä»¶ï¼ŒåŒ…å«æ•æ„Ÿä¿¡æ¯ï¼š
```env
# Djangoé…ç½®
SECRET_KEY=your-secret-key-here
DEBUG=False
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com

# æ•°æ®åº“é…ç½®
DATABASE_ENGINE=django.db.backends.postgresql
DATABASE_NAME=yipaiheji_db
DATABASE_USER=postgres
DATABASE_PASSWORD=your-password
DATABASE_HOST=localhost
DATABASE_PORT=5432

# JWTé…ç½®
JWT_SECRET=your-jwt-secret

# é‚®ä»¶é…ç½®ï¼ˆå¯é€‰ï¼‰
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-email-password

# åª’ä½“æ–‡ä»¶é…ç½®
MEDIA_ROOT=/path/to/media
MEDIA_URL=/media/
```

### 3. **.gitignore** - Gitå¿½ç•¥æ–‡ä»¶

```
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
venv/
env/

# Django
*.sqlite3
db.sqlite3
/media/
/static/

# IDE
.vscode/
.idea/
*.swp

# ç¯å¢ƒå˜é‡
.env
.env.local

# OS
.DS_Store
Thumbs.db
```

### 4. **manage.py** - Djangoç®¡ç†å‘½ä»¤

å¸¸ç”¨å‘½ä»¤ï¼š
```bash
# åˆ›å»ºæ•°æ®åº“è¡¨
python manage.py migrate

# åˆ›å»ºè¶…çº§ç”¨æˆ·
python manage.py createsuperuser

# è¿è¡Œå¼€å‘æœåŠ¡å™¨
python manage.py runserver

# åˆ›å»ºæ–°åº”ç”¨
python manage.py startapp chat

# ç”Ÿæˆè¿ç§»æ–‡ä»¶
python manage.py makemigrations

# æŸ¥çœ‹SQLè¯­å¥
python manage.py sqlmigrate app_name 0001
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè®¾ç½®

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd yipaiheji_backend

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# 3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
venv\Scripts\activate
# macOS/Linux:
source venv/bin/activate

# 4. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 5. æ‰§è¡Œæ•°æ®åº“è¿ç§»
python manage.py migrate

# 6. åˆ›å»ºè¶…çº§ç”¨æˆ·
python manage.py createsuperuser

# 7. è¿è¡Œå¼€å‘æœåŠ¡å™¨
python manage.py runserver
```

è®¿é—® http://localhost:8000/admin è¿›å…¥Djangoåå°ç®¡ç†ã€‚

---

## ğŸ“š API ä½¿ç”¨ç¤ºä¾‹

### ç”¨æˆ·æ³¨å†Œ
```bash
POST /api/users/register/
Content-Type: application/json

{
  "username": "student001",
  "password": "secure_password",
  "email": "student@example.com",
  "student_id": "202301001"
}

å“åº”:
{
  "message": "æ³¨å†ŒæˆåŠŸ",
  "user": {
    "id": 1,
    "username": "student001",
    "student_id": "202301001",
    "role": "student"
  },
  "tokens": {
    "access": "eyJ0eXAiOiJKV1QiLCJhbGc...",
    "refresh": "eyJ0eXAiOiJKV1QiLCJhbGc..."
  }
}
```

### å‘å¸ƒéœ€æ±‚
```bash
POST /api/demands/
Authorization: Bearer <access-token>
Content-Type: application/json

{
  "title": "æ¯•ä¸šç…§çº¦æ‹",
  "demand_type": "photo",
  "description": "å¯»æ‰¾ä¸“ä¸šæ‘„å½±å¸ˆæ‹æ‘„æ¯•ä¸šç…§",
  "shooting_time": "2024-06-01T10:00:00Z",
  "location": "æ ¡å›­å†…",
  "budget": 300,
  "people_count": 1,
  "tags": ["æ¯•ä¸šç…§", "äººåƒ"]
}
```

### è·å–åˆ›ä½œè€…å…¬å¼€ä¿¡æ¯
```bash
GET /api/creators/profiles/<creator_id>/
```

---

## ğŸ” æƒé™è®¾ç½®è¯´æ˜

| ç«¯ç‚¹ | æƒé™è¦æ±‚ | è¯´æ˜ |
|------|---------|------|
| ç”¨æˆ·æ³¨å†Œ | AllowAny | ä»»ä½•äººå¯ä»¥æ³¨å†Œ |
| ç”¨æˆ·ç™»å½• | AllowAny | ä»»ä½•äººå¯ä»¥ç™»å½• |
| éœ€æ±‚åˆ—è¡¨ | IsAuthenticatedOrReadOnly | å·²è®¤è¯å¯å‘å¸ƒï¼Œä»»ä½•äººå¯æŸ¥çœ‹ |
| åˆ›å»ºéœ€æ±‚ | IsAuthenticated | éœ€è¦è®¤è¯ |
| åˆ›ä½œè€…æ¡£æ¡ˆ | IsCreator | åªæœ‰å·²è®¤è¯åˆ›ä½œè€…å¯è®¿é—® |
| ä¸Šä¼ ä½œå“ | IsCreator | åªæœ‰å·²è®¤è¯åˆ›ä½œè€…å¯ä¸Šä¼  |
| è·å–åˆ›ä½œè€…ä¿¡æ¯ | AllowAny | ä»»ä½•äººå¯æŸ¥çœ‹ |

---

## ğŸ“¦ ä¸»è¦ä¾èµ–åŒ…è¯´æ˜

| åŒ…å | ç‰ˆæœ¬ | ç”¨é€” |
|-----|------|------|
| Django | >=6.0 | Webæ¡†æ¶ |
| djangorestframework | - | REST APIæ¡†æ¶ |
| djangorestframework-simplejwt | - | JWTè®¤è¯ |
| Pillow | - | å›¾ç‰‡å¤„ç† |
| django-cors-headers | - | è·¨åŸŸèµ„æºå…±äº«(CORS) |
| python-decouple | - | ç¯å¢ƒå˜é‡ç®¡ç† |

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### è¡¨å…³ç³»å›¾
```
User (ç”¨æˆ·è¡¨)
â”œâ”€â”€ 1å¯¹1 â†’ CreatorProfile (åˆ›ä½œè€…æ¡£æ¡ˆ)
â”œâ”€â”€ 1å¯¹N â†’ Work (ä½œå“)
â”œâ”€â”€ 1å¯¹N â†’ Demand (å‘å¸ƒçš„éœ€æ±‚)
â”œâ”€â”€ 1å¯¹N â†’ DemandComment (è¯„è®º/æŠ¥ä»·)
â””â”€â”€ 1å¯¹N â†’ Message (æ¶ˆæ¯)

Demand (éœ€æ±‚è¡¨)
â”œâ”€â”€ Nå¯¹1 â†’ User (å‘å¸ƒè€…)
â”œâ”€â”€ Nå¯¹1 â†’ User (åŒ¹é…çš„åˆ›ä½œè€…)
â””â”€â”€ 1å¯¹N â†’ DemandComment (è¯„è®º)

CreatorProfile (åˆ›ä½œè€…æ¡£æ¡ˆ)
â”œâ”€â”€ 1å¯¹1 â†’ User
â”œâ”€â”€ 1å¯¹N â†’ Service (æä¾›çš„æœåŠ¡)
â””â”€â”€ 1å¯¹N â†’ Work (ä½œå“)
```

---

## âš ï¸ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

- [ ] `DEBUG = False` å·²è®¾ç½®
- [ ] `SECRET_KEY` å·²æ›´æ”¹ä¸ºå¼ºå¯†é’¥
- [ ] `ALLOWED_HOSTS` å·²é…ç½®
- [ ] æ•°æ®åº“å·²è¿ç§»åˆ°PostgreSQLï¼ˆæˆ–å…¶ä»–ç”Ÿäº§æ•°æ®åº“ï¼‰
- [ ] `.env` æ–‡ä»¶å·²åˆ›å»ºä¸”ä¸åœ¨Gitä¸­
- [ ] é™æ€æ–‡ä»¶å·²æ”¶é›† (`python manage.py collectstatic`)
- [ ] CORSè®¾ç½®å·²é…ç½®
- [ ] HTTPSå·²å¯ç”¨
- [ ] æ—¥å¿—è®°å½•å·²é…ç½®
- [ ] å¤‡ä»½ç­–ç•¥å·²åˆ¶å®š

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. åˆ›å»ºæ–°åˆ†æ”¯: `git checkout -b feature/your-feature`
2. æäº¤æ›´æ”¹: `git commit -m 'Add your feature'`
3. æ¨é€åˆ†æ”¯: `git push origin feature/your-feature`
4. æäº¤Pull Request

---

## ğŸ“ è®¸å¯è¯

æ­¤é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

---

## ğŸ‘¥ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤Issueæˆ–Pull Requestã€‚

